---
title: "Combine-climate-lite-scripts"
author: 
- name: Annie Kellner Dillon^[U.S.National Park Service, Climate Change Response Program, Fort Collins, CO]
-name: add additional authors as needed
date: "`r format(Sys.time(), '%d %B %Y')`"
output: html_document
abstract: This script combines all scripts previously run under CCRP's Climate Lite protocol for Resource Stewardship Strategies (RSS). Source scripts written by John Gross and Amber Runyon. 
---

```{r user-input}

SiteID = "MACA"

```



```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE, 
  collapse = TRUE,
  warning = TRUE, # set to FALSE when done
  message = TRUE, # set to FALSE when done
  fig.path = "figures/" # Alaska: NPS stores figures within parent directory of repo
)

library(here) # Use here::here when package lubridate is used
library(plotrix); library(zoo); library(ggplot2); library(grid); library(cowplot); library(reshape2); library(raster); library(ncdf4); library(reshape2); library(WriteXLS); library(data.table); library(RColorBrewer); library(ggrepel);library(plyr); library(lubridate); library(dplyr); library(forcats); library(openxlsx) 

```


## TESTS 

```{r fig.path='./figures/MACA', eval = FALSE}

file <- list.files(path = './data', pattern = 'IntermediateFiles.RData', full.names = TRUE) # will load all .RData files within directory
load(file)

source(here::here("test.R"), local = knitr::knit_global())

knitr::knit_exit()

```

## Historical Trends (PRISM)

```{r PRISM-parse, eval=FALSE, message=FALSE, warning=FALSE, echo=FALSE}

#source(here::here("./PRISM/RSS PRISM AN81 4km summarize v01.1.R")) # Parses PRISM data. Output = "PARK_lat_long_PRISM_PptTminTmax_IntermediateFiles.RData" # NOTE: Because this script is excluded, headers have not been changed

```

```{r PRISM-plots, results=hide, fig.path='./PRISM', eval=FALSE} 
# can add fig.path = './figures/PRISM when rewriting

file <- list.files(path = './data', pattern = 'IntermediateFiles.RData', full.names = TRUE) # will load all .RData files within directory
load(file)

source(here::here("PRISM", "RSS PRISM plots v1.2.R"),echo = FALSE)

```


## Climate Futures (MACA)

```{r Climate Futures, echo=, fig.path='./figures/MACA', message=FALSE, warning=FALSE}

# source(here::here("RSS_MACA_Parsing.R")) # Parse MACA data. Output = "_init_parsed.RData". Outputs to MACA folder.

# source(here::here("Gridmet-Parse.R")) # Parse GridMET data. Output = "GridMet.csv". Outputs to Gridmet folder.

#source(here::here("scripts", "Climate-Futures", "RSS_MACA_Plot_Table_Creation.R"), local = knitr::knit_global()) # Requires "PARK_init_parsed.RData"; Output = "PARK_lat_long_Final_Environment.RData". 

#source(here::here("scripts", "Climate-Futures", "RSS_MACA_Scatter and diagnostic.R"), local = knitr::knit_global()) # Creates scatter and diagnostic plots. Outputs to Figs MACA folder. 


### START HERE  ##########

source(here::here("scripts", "Climate-Futures", "RSS_Plotting_Bar_Charts.R")) # Requires "PARK_lat_long_Final_Environment.RData". Outputs plots and Excel Workbook to Figs MACA folder.

```

# Water Balance

```{r}
source(here::here("WaterBalance/Daily_WB_batch_v2.R")) # Requires "PARK_lat_long_Final_Environment.RData", "PARK_Site_characteristics.csv", and "D_AET_points.csv". Outputs to WB folder. 
```

# Summary Plots

```{r}
source(here::here("SummaryPlots/Summary plots.R")) # Requires "PARK_lat_long_PRISM_PptTminTmax_IntermediateFiles.RData",  "PARK_lat_long_Final_Environment.RData", and "GridMet.csv". Outputs to RSS/PARK folder (this should be changed)

source(here::here("SummaryPlots/Summary WB plots.R")) # Outputs to RSS/PARK folder (should be changed).
```

# Additional Tables and Plots

```{r}

# Have not annotated

source(here::here("Additional-tables-plots/RSS_MACA_drought_char.R"))

source(here::here("Additional-tables-plots/FLI FBI phenology plots.R"))

source(here::here("Additional-tables-plots/RSS Audubon summary.R"))
```

```{r}
sessionInfo() # Records package versions used
```

